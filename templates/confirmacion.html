{% extends "base.html" %}
{% block content %}

<!-- 📸 FOTO DE LA SEDE -->
<div class="sede-foto">
  {% if foto_sede %}
    <img src="{{ url_for('static', filename=foto_sede.replace('static/', '')) }}" alt="{{ sede }}">
  {% endif %}
</div>

<!-- 👨‍🦱 FOTO DEL BARBERO -->
{% if foto_barbero %}
<div class="barbero-preview">
  <img src="{{ url_for('static', filename=foto_barbero.replace('static/', '')) }}" alt="{{ barbero }}">
  <p>{{ barbero }}</p>
</div>
{% endif %}

<!-- 🪜 PASOS -->
<div class="steps">
  <span class="step">1 Sede</span>
  <span class="step">2 Servicio</span>
  <span class="step">3 Barbero</span>
  <span class="step active">4 Confirmar</span>
</div>

<h2>Confirmación de cita</h2>

<!-- 🧾 CONTENEDOR DE CONFIRMACIÓN -->
<div class="confirm-container">
  <!-- 📋 Resumen -->
  <div class="summary">
    <h3>Resumen de Cita</h3>
    <div class="summary-card">
      <p><strong>Sede:</strong> {{ sede }}</p>
      <p><strong>Servicio:</strong> {{ servicio }}</p>
      <p><strong>Barbero:</strong> {{ barbero }}</p>
      <p><strong>Duración:</strong> {{ duracion }} min aprox.</p>
    </div>
    <div class="price">$ {{ precio }}</div>
  </div>

  <!-- 📅 Formulario -->
  <div class="checkout">
    <h3>Selecciona fecha y hora</h3>
    <form action="{{ url_for('guardar_cita') }}" method="POST" class="confirm-form">
      <input type="hidden" name="sede" value="{{ sede }}">
      <input type="hidden" name="servicio" value="{{ servicio }}">
      <input type="hidden" name="barbero" value="{{ barbero }}">

      <label for="fecha">Fecha</label>
      <input type="date" id="fecha" name="fecha" required>

      <label for="hora">Hora (libre)</label>
      <select id="hora" name="hora" required>
        <option value="">Selecciona una hora</option>
        {% if horas %}
          {% for h in horas %}
            <option value="{{ h }}">{{ h }}</option>
          {% endfor %}
        {% else %}
          <option disabled>No hay horas disponibles</option>
        {% endif %}
      </select>

      <button type="submit" class="btn">Confirmar Cita</button>
    </form>
    <p class="secure">🔒 Cita segura con sincronización Google Calendar</p>
  </div>
</div>

<!-- 🔙 BOTONES DE NAVEGACIÓN -->
<div class="nav-buttons">
  <form action="{{ url_for('barberos') }}" method="POST">
    <input type="hidden" name="sede" value="{{ sede }}">
    <input type="hidden" name="servicio" value="{{ servicio }}">
    <button type="submit" class="btn secondary">Volver</button>
  </form>
  <a href="{{ url_for('sede') }}" class="btn secondary">Inicio</a>
</div>

{% endblock %}
